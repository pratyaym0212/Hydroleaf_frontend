(()=>{var e={};e.id=247,e.ids=[247],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9646:e=>{"use strict";e.exports=require("child_process")},5511:e=>{"use strict";e.exports=require("crypto")},4735:e=>{"use strict";e.exports=require("events")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},8354:e=>{"use strict";e.exports=require("util")},4573:e=>{"use strict";e.exports=require("node:buffer")},7598:e=>{"use strict";e.exports=require("node:crypto")},7975:e=>{"use strict";e.exports=require("node:util")},3215:(e,s,r)=>{"use strict";r.r(s),r.d(s,{patchFetch:()=>R,routeModule:()=>_,serverHooks:()=>d,workAsyncStorage:()=>I,workUnitAsyncStorage:()=>T});var t={};r.r(t),r.d(t,{GET:()=>E});var i=r(2706),n=r(8203),o=r(5994),u=r(9187),a=r(2037),c=r(9824),p=r(8481);let E=async()=>{let e=await (0,a.j2)();if(!e?.user)return u.NextResponse.json({error:{code:"no-access",message:"You are not signed in."}},{status:401});let s=await p.n.checkout.sessions.create({mode:"subscription",customer:e.user.stripeCustomerId,line_items:[{price:c._.STRIPE_SUBSCRIPTION_PRICE_ID,quantity:1}],success_url:`${c._.APP_URL}?session_id={CHECKOUT_SESSION_ID}`,cancel_url:c._.APP_URL});return u.NextResponse.json({session:s},{status:200})},_=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/stripe/checkout-session/route",pathname:"/api/stripe/checkout-session",filename:"route",bundlePath:"app/api/stripe/checkout-session/route"},resolvedPagePath:"C:\\Users\\Admin\\New folder (2)\\hydroleaf\\src\\app\\api\\stripe\\checkout-session\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:I,workUnitAsyncStorage:T,serverHooks:d}=_;function R(){return(0,o.patchFetch)({workAsyncStorage:I,workUnitAsyncStorage:T})}},6487:()=>{},8335:()=>{},2037:(e,s,r)=>{"use strict";r.d(s,{Y9:()=>p,j2:()=>c});var t=r(6814),i=r(4587),n=r(8395),o=r(9824),u=r(5600),a=r(8481);let{auth:c,handlers:p,signIn:E,signOut:_}=(0,i.Ay)({adapter:(0,t.y)(u.A),providers:[(0,n.A)({clientId:o._.GITHUB_ID,clientSecret:o._.GITHUB_SECRET})],callbacks:{session:async({session:e,user:s})=>(e.user&&(e.user.id=s.id,e.user.stripeCustomerId=s.stripeCustomerId,e.user.isActive=s.isActive),e)},events:{createUser:async({user:e})=>{e.email&&e.name&&await a.n.customers.create({email:e.email,name:e.name}).then(async s=>u.A.user.update({where:{id:e.id},data:{stripeCustomerId:s.id}}))}}})},5600:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});let t=require("@prisma/client"),i=global.prisma||new t.PrismaClient},8481:(e,s,r)=>{"use strict";r.d(s,{n:()=>n});var t=r(6993),i=r(9824);let n=new t.A(i._.STRIPE_SECRET_KEY,{apiVersion:"2024-12-18.acacia"})},9824:(e,s,r)=>{"use strict";r.d(s,{_:()=>n});var t=r(1115),i=r(379);let n=(0,t.w)({server:{DATABASE_URL:i.z.string().min(1),APP_URL:i.z.string().url().min(1),GOOGLE_SITE_VERIFICATION_ID:i.z.string().optional(),GITHUB_ID:i.z.string().min(1),GITHUB_SECRET:i.z.string().min(1),NEXTAUTH_URL:i.z.string().url().optional(),NEXTAUTH_SECRET:i.z.string().min(1),STRIPE_SECRET_KEY:i.z.string().min(1),STRIPE_WEBHOOK_SECRET_KEY:i.z.string().min(1),STRIPE_SUBSCRIPTION_PRICE_ID:i.z.string().min(1)},client:{NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:i.z.string().min(1)},runtimeEnv:{DATABASE_URL:process.env.DATABASE_URL,APP_URL:process.env.APP_URL,GOOGLE_SITE_VERIFICATION_ID:process.env.GOOGLE_SITE_VERIFICATION_ID,GITHUB_ID:process.env.GITHUB_ID,GITHUB_SECRET:process.env.GITHUB_SECRET,NEXTAUTH_URL:process.env.NEXTAUTH_URL,NEXTAUTH_SECRET:process.env.NEXTAUTH_SECRET,STRIPE_SECRET_KEY:process.env.STRIPE_SECRET_KEY,STRIPE_WEBHOOK_SECRET_KEY:process.env.STRIPE_WEBHOOK_SECRET_KEY,STRIPE_SUBSCRIPTION_PRICE_ID:process.env.STRIPE_SUBSCRIPTION_PRICE_ID,NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:"your stripe publishable key"}})}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[440,828,226,728],()=>r(3215));module.exports=t})();